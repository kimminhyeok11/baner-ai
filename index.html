<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ï≤úÍ∏àÎ¨∏ (ÂçÉÈáëÈñÄ)</title>
    <meta name="description" content="ÌïúÍµ≠ Î¨¥Î¶º ÏÑ∏Í≥ÑÍ¥ÄÏúºÎ°ú Ï¶êÍ∏∞Îäî Ìà¨Ïûê Ïª§ÎÆ§ÎãàÌã∞. Ï¢ÖÎ™© ÎπÑÍ∏â, Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ, ÏòàÏ∏° Ï±åÎ¶∞ÏßÄ Îì±ÏùÑ ÌÜµÌï¥ Í∞ïÌò∏Ïùò ÌòëÍ∞ùÎì§Í≥º ÍµêÎ•òÌïòÏÑ∏Ïöî.">
    <link rel="canonical" href="https://baner-ai.vercel.app/">
    <meta name="theme-color" content="#000000">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="Ï≤úÍ∏àÎ¨∏">
    <meta property="og:title" content="Ï≤úÍ∏àÎ¨∏ (ÂçÉÈáëÈñÄ)">
    <meta property="og:description" content="ÌïúÍµ≠ Î¨¥Î¶º ÏÑ∏Í≥ÑÍ¥Ä Í∏∞Î∞ò Ìà¨Ïûê Ïª§ÎÆ§ÎãàÌã∞. Ï¢ÖÎ™© ÎπÑÍ∏âÍ≥º Ï†ÑÏùåÏúºÎ°ú ÍµêÎ•òÌïòÏÑ∏Ïöî.">
    <meta property="og:url" content="https://baner-ai.vercel.app/">
    <meta property="og:image" content="https://baner-ai.vercel.app/og.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ï≤úÍ∏àÎ¨∏ (ÂçÉÈáëÈñÄ)">
    <meta name="twitter:description" content="ÌïúÍµ≠ Î¨¥Î¶º ÏÑ∏Í≥ÑÍ¥Ä Í∏∞Î∞ò Ìà¨Ïûê Ïª§ÎÆ§ÎãàÌã∞. Ï¢ÖÎ™© ÎπÑÍ∏âÍ≥º Ï†ÑÏùåÏúºÎ°ú ÍµêÎ•òÌïòÏÑ∏Ïöî.">
    <meta name="twitter:image" content="https://baner-ai.vercel.app/og.jpg">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêâ</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style_ticker.css">
    <style>
        /* Mobile Safe Area Fixes */
        .pb-safe-nav { padding-bottom: calc(4rem + env(safe-area-inset-bottom)); }
        .pt-safe-top { padding-top: env(safe-area-inset-top); }
        
        /* Hide Scrollbar but keep functionality */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden bg-black text-white selection:bg-yellow-500/30">
    <div id="toast-container" class="fixed bottom-20 left-1/2 transform -translate-x-1/2 z-[100] flex flex-col gap-2 w-max max-w-[90vw]"></div>

    <!-- Mobile Header -->
    <header class="flex-none z-50 bg-black/90 backdrop-blur-md border-b border-gray-800 sticky top-0 md:hidden pt-safe-top">
        <div class="w-full px-4 h-14 flex items-center justify-between">
            <h1 id="mobile-header-title" class="text-xl font-black tracking-tighter cursor-pointer text-yellow-500 truncate max-w-[200px]" onclick="navigate('gangho-plaza')">
                ÂçÉÈáëÈñÄ
            </h1>
            <div class="flex items-center gap-3">
                 <button onclick="openNotificationModal()" class="relative text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                    <span id="noti-badge" class="hidden absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border border-black"></span>
                </button>
                <div id="auth-buttons-mob"></div>
            </div>
        </div>
    </header>

    <!-- App Shell: Desktop Sidebar + Main Content -->
    <div class="flex flex-1 overflow-hidden relative">
        <!-- Desktop Sidebar -->
        <aside class="hidden md:flex flex-col w-64 border-r border-gray-800 bg-[#1C1C1E] p-4 gap-4 z-40">
            <div class="px-2 mb-4 pt-2">
                 <h1 class="text-2xl font-black tracking-tighter cursor-pointer text-yellow-500 flex items-center gap-2" onclick="navigate('gangho-plaza')">
                    <span>ÂçÉÈáëÈñÄ</span>
                    <span class="text-[10px] font-bold text-black bg-yellow-500 rounded px-1.5 py-0.5">BETA</span>
                </h1>
            </div>
            
            <nav class="flex flex-col gap-1 flex-1 overflow-y-auto no-scrollbar">
                <button onclick="navigate('gangho-plaza')" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium" data-target="gangho-plaza">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    Í¥ëÏû•
                </button>
                <button onclick="navigate('stock-board')" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium" data-target="stock-board">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                    Ï¢ÖÎ™© ÎπÑÍ∏â
                </button>
                 <button onclick="navigate('news-view')" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium" data-target="news-view">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                    Îâ¥Ïä§
                </button>
                 <button onclick="navigate('journal-board')" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium" data-target="journal-board">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
                    Îß§Îß§ ÏùºÏßÄ
                </button>
                <div class="h-px bg-gray-800 my-2 mx-2"></div>
                <div class="px-3 text-xs font-bold text-gray-500 mb-1">Ïª§ÎÆ§ÎãàÌã∞</div>
                <button onclick="navigate('secret-inn')" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium" data-target="secret-inn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path></svg>
                    ÏïîÏ≤ú Í∞ùÏûî
                </button>
                <button onclick="navigate('free-board')" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium" data-target="free-board">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    ÏûêÏú† Í≤åÏãúÌåê
                </button>
                <button id="nav-my-page" onclick="navigate('my-page')" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium hidden" data-target="my-page">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    ÎÇòÏùò ÎπÑÍ∏â
                </button>
                 <button onclick="openMenuPalette()" class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-400 hover:bg-gray-800 hover:text-white transition-all text-sm font-medium mt-auto">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                    Ï†ÑÏ≤¥ Î©îÎâ¥
                </button>
            </nav>
            
            <div id="auth-buttons" class="pt-4 border-t border-gray-800"></div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-grow overflow-y-auto scroll-hidden bg-black relative w-full">
            <div class="max-w-4xl mx-auto w-full p-4 md:p-8 pb-safe-nav md:pb-8">
                
                <!-- Gangho Plaza (Home) -->
                <div id="gangho-plaza" class="app-view">
                    <!-- Stock Ticker -->
                    <div class="mb-6 overflow-hidden rounded-xl bg-black border border-gray-800 relative h-10 flex items-center shadow-lg shadow-yellow-900/10">
                        <div class="absolute left-0 top-0 bottom-0 bg-yellow-600 px-3 flex items-center z-10 font-black text-black text-xs uppercase tracking-wider">LIVE</div>
                        <div class="ticker-wrap flex-1 ml-12">
                            <div class="ticker" id="main-ticker">
                                <!-- Items will be injected by JS -->
                                <div class="ticker__item text-gray-400 text-xs">Îç∞Ïù¥ÌÑ∞ ÏàòÏã† Ï§ë...</div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-6 rounded-3xl overflow-hidden border border-gray-800 bg-[#1C1C1E] p-6 md:p-8 relative">
                        <!-- Background Grid/Effect -->
                        <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px); background-size: 20px 20px;"></div>
                        
                        <div class="relative z-10 flex flex-col md:flex-row items-center justify-between gap-8">
                            <div class="text-center md:text-left flex-1">
                                <div class="inline-flex items-center gap-2 mb-2 px-3 py-1 rounded-full bg-gray-800/50 border border-gray-700 backdrop-blur-sm">
                                    <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                                    <span class="text-[10px] font-bold text-gray-300 tracking-wider">MARKET OPEN</span>
                                </div>
                                <h2 class="text-4xl md:text-5xl font-black text-white mb-2 tracking-tight">Í∞ïÌò∏ Í¥ëÏû•</h2>
                                <p class="text-gray-400 text-sm md:text-base mb-6 max-w-md mx-auto md:mx-0">Î¨¥Î¶º Í≥†ÏàòÎì§Ïùò Ìà¨Ïûê ÎπÑÍ∏âÏù¥ Ïò§Í∞ÄÎäî Í≥≥.<br>Ïò§ÎäòÏùò Ï¶ùÏãú ÌùêÎ¶ÑÏùÑ ÏùΩÍ≥† ÏäπÎ¶¨ÌïòÏã≠ÏãúÏò§.</p>
                                
                                <div class="flex flex-wrap justify-center md:justify-start gap-3">
                                    <button onclick="tryOpenWriteModal('public')" class="bg-yellow-500 hover:bg-yellow-400 text-black font-black px-6 py-3 rounded-xl transition-all transform hover:scale-105 shadow-lg shadow-yellow-500/20 flex items-center gap-2">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                        ÎπÑÍ∏â Ïò¨Î¶¨Í∏∞
                                    </button>
                                    <button onclick="navigate('stock-board')" class="bg-gray-800 hover:bg-gray-700 text-white font-bold px-5 py-3 rounded-xl border border-gray-700 transition-all flex items-center gap-2">
                                        <span>üìà</span> Ï¢ÖÎ™© ÎπÑÍ∏â
                                    </button>
                                    <button onclick="navigate('secret-inn')" class="bg-gray-800 hover:bg-gray-700 text-white font-bold px-5 py-3 rounded-xl border border-gray-700 transition-all flex items-center gap-2">
                                        <span>üç∂</span> ÏïîÏ≤ú Í∞ùÏûî
                                    </button>
                                </div>
                            </div>

                            <!-- Market Dashboard -->
                            <div class="w-full md:w-auto min-w-[300px] bg-black/50 backdrop-blur-md border border-gray-800 rounded-2xl p-4 shadow-2xl">
                                <div class="flex items-center justify-between mb-4 border-b border-gray-800 pb-2">
                                    <span class="text-xs font-bold text-gray-500 uppercase">Market Index</span>
                                    <span class="text-[10px] text-green-500 font-mono animate-pulse">‚óè REALTIME</span>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-[10px] text-gray-500 font-bold mb-1">KOSPI</div>
                                        <div id="mini-kospi" class="text-2xl font-black text-white tracking-tight">2,654.32</div>
                                        <div class="text-xs font-bold text-red-500 flex items-center gap-1">
                                            <span>‚ñº 12.45</span>
                                            <span>(-0.47%)</span>
                                        </div>
                                    </div>
                                    <div class="border-l border-gray-800 pl-4">
                                        <div class="text-[10px] text-gray-500 font-bold mb-1">KOSDAQ</div>
                                        <div id="mini-kosdaq" class="text-2xl font-black text-white tracking-tight">864.12</div>
                                        <div class="text-xs font-bold text-red-500 flex items-center gap-1">
                                            <span>‚ñº 4.12</span>
                                            <span>(-0.48%)</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 pt-3 border-t border-gray-800">
                                    <div class="flex justify-between items-center text-[10px]">
                                        <span class="text-gray-500">USD/KRW</span>
                                        <span class="text-white font-mono font-bold">1,334.50 <span class="text-green-500">‚ñ≤ 2.50</span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Grid Layout -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Left Column: Feed -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- News Section -->
                            <div>
                                <div class="flex items-center justify-between mb-3">
                                    <h3 class="section-title">ÏµúÏã† Îâ¥Ïä§</h3>
                                    <button onclick="navigate('news-view')" class="text-xs text-yellow-500 hover:text-yellow-400 font-bold">ÎçîÎ≥¥Í∏∞</button>
                                </div>
                                <div id="news-feed" class="divide-y divide-gray-800 rounded-xl overflow-hidden"></div>
                            </div>

                            <!-- Posts Feed -->
                            <div>
                                <div class="flex items-center justify-between mb-3">
                                    <h3 class="section-title">Ïã§ÏãúÍ∞Ñ ÎπÑÍ∏â</h3>
                                    <div class="flex gap-2">
                                        <button onclick="navigate('stock-board')" class="text-xs text-gray-400 hover:text-white">Ï¢ÖÎ™©Î≥Ñ</button>
                                        <button onclick="navigate('secret-inn')" class="text-xs text-gray-400 hover:text-white">Í∞ùÏûî</button>
                                    </div>
                                </div>
                                <div class="divide-y divide-gray-800" id="posts-list-public"></div>
                            </div>
                        </div>

                        <!-- Right Column: Widgets -->
                        <div class="space-y-6 hidden lg:block">
                            <div id="weekly-digest" class="hidden">
                                <div class="card-elegant p-4 rounded-2xl bg-[#1C1C1E] border border-gray-800">
                                    <div class="text-sm text-yellow-500 font-bold mb-3 uppercase tracking-wider">Weekly Best</div>
                                    <div id="weekly-digest-list" class="space-y-2"></div>
                                </div>
                            </div>
                            <div id="home-stock-rank">
                                <div class="card-elegant p-4 rounded-2xl bg-[#1C1C1E] border border-gray-800">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="text-sm text-yellow-500 font-bold uppercase tracking-wider">Stock Ranking</div>
                                        <div class="flex items-center gap-1">
                                            <button id="home-rank-best" onclick="renderHomeStockRank('best')" class="px-2 py-1 text-[11px] rounded border bg-[#1C1C1E] text-gray-300 border-gray-800">Î≤†Ïä§Ìä∏</button>
                                            <button id="home-rank-today" onclick="renderHomeStockRank('today')" class="px-2 py-1 text-[11px] rounded border bg-[#1C1C1E] text-gray-300 border-gray-800">Ïò§Îäò</button>
                                            <button id="home-rank-week" onclick="renderHomeStockRank('week')" class="px-2 py-1 text-[11px] rounded border bg-[#1C1C1E] text-gray-300 border-gray-800">Ï£ºÍ∞Ñ</button>
                                        </div>
                                    </div>
                                    <div id="home-stock-rank-list" class="space-y-2"></div>
                                </div>
                            </div>

                            <div id="journal-widget">
                                <div class="card-elegant p-4 rounded-2xl bg-[#1C1C1E] border border-gray-800">
                                    <div class="flex items-center justify-between mb-3">
                                        <div class="text-sm text-red-500 font-bold uppercase tracking-wider">Ïã§ÏãúÍ∞Ñ ÏùºÏßÄ</div>
                                        <button onclick="navigate('journal-board')" class="text-[10px] text-gray-500 hover:text-white">Ï†ÑÏ≤¥Î≥¥Í∏∞</button>
                                    </div>
                                    <div id="journal-feed" class="space-y-3 text-xs"></div>
                                </div>
                            </div>
                            
                            <div id="rookie-spotlight" class="hidden">
                                <div class="card-elegant p-4 rounded-2xl bg-[#1C1C1E] border border-gray-800">
                                    <div class="text-sm text-blue-400 font-bold mb-3 uppercase tracking-wider">Rookie Rising</div>
                                    <div id="rookie-spotlight-list" class="space-y-2"></div>
                                </div>
                            </div>

                            <div id="sponsor-section" class="hidden">
                                <div class="card-elegant p-4 rounded-2xl bg-[#1C1C1E] border border-gray-800">
                                    <div class="text-xs text-gray-500 font-bold mb-2">SPONSORED</div>
                                    <div id="sponsor-list" class="space-y-2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stock Board -->
                <div id="stock-board" class="app-view hidden">
                    <div class="mb-6">
                        <!-- Header & Current Stock -->
                        <div class="flex flex-col md:flex-row md:items-end justify-between mb-6 gap-4">
                            <div>
                                <h2 class="text-3xl font-black text-white leading-none mb-2">Ï¢ÖÎ™© ÎπÑÍ∏â</h2>
                                <p class="text-gray-500 text-sm">Í∞ïÌò∏Ïùò Ìà¨Ïûê Í≥†ÏàòÎì§Ïù¥ ÎÇ®Í∏¥ Ï¢ÖÎ™© Î∂ÑÏÑù</p>
                            </div>
                            <div class="flex items-center gap-3 self-end md:self-auto">
                                <div id="current-stock-display" class="hidden flex items-center gap-3 bg-[#1C1C1E] border border-gray-800 px-4 py-2 rounded-2xl shadow-sm">
                                    <span class="text-xs text-gray-500 font-bold uppercase tracking-wider">SELECTED</span>
                                    <span id="current-stock-name" class="text-lg font-black text-yellow-500">ÏÇºÏÑ±Ï†ÑÏûê</span>
                                    <button id="clear-stock-btn" class="text-gray-500 hover:text-white transition-colors">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Main Control Bar -->
                        <div class="bg-[#1C1C1E] border border-gray-800 rounded-3xl p-1.5 mb-6 shadow-lg flex flex-col md:flex-row gap-1.5">
                            <!-- Search Input -->
                            <div class="relative flex-grow">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                    <svg class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <input id="stock-room-input" type="text" list="stock-options" 
                                    class="w-full bg-black/20 border-none rounded-2xl pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:ring-2 focus:ring-yellow-500/50 focus:bg-black/40 transition-all text-sm font-medium" 
                                    placeholder="Ï¢ÖÎ™©Î™Ö ÎòêÎäî ÏΩîÎìúÎ°ú Í≤ÄÏÉâ...">
                                <button onclick="goToStockRoom()" class="absolute inset-y-1.5 right-1.5 bg-gray-800 hover:bg-gray-700 text-white px-4 rounded-xl text-xs font-bold transition-colors">
                                    Ïù¥Îèô
                                </button>
                            </div>
                        </div>

                        <!-- Stock Chips (Horizontal Scroll) -->
                        <div id="stock-tabs" class="flex overflow-x-auto gap-2 pb-2 mb-4 scroll-hidden no-scrollbar mask-gradient-right px-1"></div>

                        <!-- Filters & Sort -->
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6 px-1">
                            <!-- Category Filter (Segmented Control) -->
                            <div id="stock-category-bar" class="flex bg-[#1C1C1E] p-1 rounded-xl border border-gray-800">
                                <button id="stock-cat-all" onclick="setStockCategory('all')" class="px-4 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">Ï†ÑÏ≤¥</button>
                                <button id="stock-cat-notice" onclick="setStockCategory('notice')" class="px-4 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">Í≥µÏßÄ</button>
                                <button id="stock-cat-question" onclick="setStockCategory('question')" class="px-4 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">ÏßàÎ¨∏</button>
                                <button id="stock-cat-analysis" onclick="setStockCategory('analysis')" class="px-4 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">Î∂ÑÏÑù</button>
                            </div>

                            <!-- Sort Options -->
                            <div id="stock-sort-bar" class="flex items-center gap-1 bg-[#1C1C1E] p-1 rounded-xl border border-gray-800">
                                <button id="stock-sort-latest" onclick="setStockSortMode('latest')" class="px-3 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">ÏµúÏã†Ïàú</button>
                                <div class="w-[1px] h-3 bg-gray-700"></div>
                                <button id="stock-sort-top" onclick="setStockSortMode('top')" class="px-3 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">Ïù∏Í∏∞Ïàú</button>
                                <div class="w-[1px] h-3 bg-gray-700"></div>
                                <button id="stock-sort-views" onclick="setStockSortMode('views')" class="px-3 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">Ï°∞ÌöåÏàú</button>
                            </div>
                        </div>

                        <!-- Ranking Section (Collapsible or Card) -->
                        <div id="stock-rank" class="mb-8 hidden">
                            <div class="bg-[#1C1C1E] border border-gray-800 rounded-2xl overflow-hidden">
                                <div class="px-5 py-4 border-b border-gray-800 flex items-center justify-between bg-black/20">
                                    <h3 class="font-bold text-white text-sm flex items-center gap-2">
                                        <span class="text-lg">üî•</span> Ïã§ÏãúÍ∞Ñ Îû≠ÌÇπ
                                    </h3>
                                    <div class="flex bg-black/40 rounded-lg p-1 gap-1">
                                        <button id="rank-best" onclick="renderStockRank('best')" class="px-3 py-1 text-[10px] rounded-md font-bold text-gray-400 hover:text-white transition-colors">Î≤†Ïä§Ìä∏</button>
                                        <button id="rank-today" onclick="renderStockRank('today')" class="px-3 py-1 text-[10px] rounded-md font-bold text-gray-400 hover:text-white transition-colors">Ïò§Îäò</button>
                                        <button id="rank-week" onclick="renderStockRank('week')" class="px-3 py-1 text-[10px] rounded-md font-bold text-gray-400 hover:text-white transition-colors">Ï£ºÍ∞Ñ</button>
                                    </div>
                                </div>
                                <div id="stock-rank-list" class="p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2"></div>
                            </div>
                        </div>

                        <div id="hot-rooms" class="mb-4"></div>
                        <div id="recent-stocks" class="flex overflow-x-auto gap-2 pb-2 mb-4 scroll-hidden no-scrollbar"></div>
                    </div>
                    
                    <div class="divide-y divide-gray-800" id="posts-list-stock"></div>
                </div>

                <!-- News View -->
                <div id="news-view" class="app-view hidden">
                    <h2 class="hidden md:block text-2xl font-bold text-white mb-4">Ï¶ùÍ∂å Îâ¥Ïä§</h2>
                    <div class="flex items-center gap-2 mb-6">
                        <div class="relative flex-grow">
                            <input id="news-query-input" type="text" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl pl-10 pr-4 py-3 text-white focus:border-yellow-500 outline-none text-sm transition-colors" placeholder="ÌÇ§ÏõåÎìú Í≤ÄÏÉâ (Ïòà: Î∞òÎèÑÏ≤¥)">
                            <svg class="absolute left-3 top-3.5 text-gray-500 w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        </div>
                        <button onclick="refreshNewsView()" class="bg-gray-800 text-white px-4 py-3 rounded-xl text-sm font-bold hover:bg-gray-700 border border-gray-700 nowrap">ÏÉàÎ°úÍ≥†Ïπ®</button>
                    </div>
                    <div id="news-list" class="divide-y divide-gray-800 min-h-[200px]"></div>
                </div>

                <!-- Materials Board -->
                <div id="materials-board" class="app-view hidden">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-bold text-white">Í∞ïÏùò ÏûêÎ£å</h2>
                        <button onclick="navigate('material-upload')" class="text-xs bg-yellow-600 text-black px-3 py-1.5 rounded-lg font-bold hover:bg-yellow-500">ÏûêÎ£å Ïò¨Î¶¨Í∏∞</button>
                    </div>
                    <div id="materials-list" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
                </div>

                <!-- Journal Board -->
                <div id="journal-board" class="app-view hidden">
                    <div class="mb-6">
                         <h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">Îß§Îß§ ÏùºÏßÄ</h2>
                         <p class="text-gray-500 text-sm mb-4">ÏûêÏã†Ïùò Îß§Îß§Î•º Î≥µÍ∏∞ÌïòÍ≥† Í∞ïÌò∏Ïóê Í≥µÏú†ÌïòÏãúÏò§</p>
                        
                        <!-- New Filter Bar -->
                        <div class="bg-[#1C1C1E] p-2 rounded-2xl flex flex-wrap gap-2 items-center border border-gray-800 shadow-sm">
                            <div class="relative flex-grow min-w-[140px]">
                                <input id="journal-filter-keyword" type="text" class="w-full bg-black/50 border-none rounded-xl pl-9 pr-3 py-2.5 text-sm text-white focus:ring-1 focus:ring-yellow-500 placeholder-gray-600 transition-all" placeholder="Ï¢ÖÎ™©/ÎÇ¥Ïö© Í≤ÄÏÉâ">
                                <svg class="absolute left-3 top-3 text-gray-600 w-4 h-4" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                            </div>
                            <div class="relative w-32 hidden sm:block">
                                <input id="journal-filter-strategy" type="text" class="w-full bg-black/50 border-none rounded-xl px-3 py-2.5 text-sm text-white focus:ring-1 focus:ring-yellow-500 placeholder-gray-600 transition-all" placeholder="Ï†ÑÎûµ ÌÉúÍ∑∏">
                            </div>
                            <div class="flex bg-black/50 rounded-xl p-1 gap-1">
                                <label class="cursor-pointer px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-1.5 select-none">
                                    <input id="journal-filter-positive" type="checkbox" class="hidden peer">
                                    <span class="w-2 h-2 rounded-full bg-red-500 opacity-50 peer-checked:opacity-100 peer-checked:shadow-[0_0_6px_rgba(239,68,68,0.8)] transition-all"></span>
                                    <span class="text-xs text-gray-500 font-bold peer-checked:text-white">ÏàòÏùµ</span>
                                </label>
                                <div class="w-[1px] bg-gray-700 my-1"></div>
                                <label class="cursor-pointer px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-1.5 select-none">
                                    <input id="journal-filter-negative" type="checkbox" class="hidden peer">
                                    <span class="w-2 h-2 rounded-full bg-blue-500 opacity-50 peer-checked:opacity-100 peer-checked:shadow-[0_0_6px_rgba(59,130,246,0.8)] transition-all"></span>
                                    <span class="text-xs text-gray-500 font-bold peer-checked:text-white">ÏÜêÏã§</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4" id="journal-board-list"></div>
                </div>

                <!-- Secret Inn -->
                <div id="secret-inn" class="app-view hidden">
                    <div class="mb-6">
                         <div class="flex items-end justify-between mb-4">
                            <div>
                                <h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">ÏïîÏ≤ú Í∞ùÏûî</h2>
                                <p class="text-gray-500 text-sm">ÏùµÎ™ÖÏúºÎ°ú ÎÇòÎàÑÎäî ÏùÄÎ∞ÄÌïú ÎåÄÌôî</p>
                            </div>
                            <button onclick="tryOpenWriteModal('secret')" class="text-xs bg-[#2C2C2E] text-white px-3 py-1.5 rounded-full font-bold hover:bg-[#3A3A3C] transition flex items-center gap-2 border border-gray-700">
                                <span>üé≠</span> ÏùµÎ™Ö Í∏ÄÏì∞Í∏∞
                            </button>
                        </div>
                    </div>
                    <div class="divide-y divide-gray-800" id="posts-list-secret"></div>
                </div>

                <!-- Post Detail (Embedded) -->
                <div id="post-detail" class="app-view hidden">
                    <div class="max-w-2xl mx-auto">
                        <button onclick="window.history.back()" class="mb-6 text-gray-500 hover:text-white flex items-center gap-1.5 text-sm font-medium transition-colors group">
                            <span class="p-1 rounded-full bg-gray-800/50 group-hover:bg-gray-800 transition-colors">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                            </span>
                            Î™©Î°ùÏúºÎ°ú
                        </button>
                        
                        <article class="relative">
                            <!-- Header -->
                            <div class="mb-8">
                                <h1 id="detail-title" class="text-3xl md:text-4xl font-black text-white mb-4 leading-tight tracking-tight"></h1>
                                
                                <div class="flex items-center justify-between border-b border-gray-800 pb-6">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-xl overflow-hidden">
                                            <img id="detail-avatar" class="w-full h-full object-cover hidden" alt="">
                                            <span id="detail-avatar-placeholder">üë§</span>
                                        </div>
                                        <div>
                                            <div id="detail-author" class="font-bold text-white text-sm"></div>
                                            <div id="detail-date" class="text-xs text-gray-500"></div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button id="btn-share-link" class="p-2 text-gray-400 hover:text-white bg-gray-800/50 hover:bg-gray-800 rounded-full transition"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg></button>
                                        <button onclick="openReportModal('post', state.currentPostId)" class="p-2 text-gray-400 hover:text-red-500 bg-gray-800/50 hover:bg-gray-800 rounded-full transition"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg></button>
                                        <button id="delete-post-btn" class="hidden p-2 text-red-500 hover:text-red-400 bg-red-900/10 hover:bg-red-900/20 rounded-full transition"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button>
                                    </div>
                                </div>
                            </div>

                            <!-- Content -->
                            <div id="detail-content" class="prose prose-invert prose-lg max-w-none text-gray-200 leading-relaxed mb-12"></div>
                            
                            <!-- Action Bar -->
                            <div class="flex justify-center gap-6 mb-12">
                                <button onclick="toggleLike()" class="group flex flex-col items-center gap-1 min-w-[60px]">
                                    <div class="w-12 h-12 rounded-full bg-gray-800 group-hover:bg-pink-900/20 flex items-center justify-center transition-all border border-gray-700 group-hover:border-pink-500/50">
                                        <svg class="w-6 h-6 text-gray-400 group-hover:text-pink-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                                    </div>
                                    <span id="detail-likes" class="text-xs font-bold text-gray-400 group-hover:text-pink-500">0</span>
                                </button>
                                <div class="flex flex-col items-center gap-1 min-w-[60px]">
                                    <div class="w-12 h-12 rounded-full bg-gray-800 flex items-center justify-center border border-gray-700">
                                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                                    </div>
                                    <span id="detail-views" class="text-xs font-bold text-gray-400">0</span>
                                </div>
                            </div>
                        </article>

                        <!-- Comments -->
                        <div class="bg-[#1C1C1E] rounded-2xl border border-gray-800 overflow-hidden">
                            <div class="p-4 border-b border-gray-800 bg-black/20">
                                <h4 class="font-bold text-white flex items-center gap-2">
                                    Ï†ÑÏÑú (ÎåìÍ∏Ä)
                                </h4>
                            </div>
                            <div class="p-4 bg-black/20">
                                <div class="relative">
                                    <textarea id="comment-input" placeholder="ÏùòÍ≤¨ÏùÑ ÎÇ®Í∏∞ÏãúÏò§..." class="w-full bg-[#2C2C2E] border border-gray-700 rounded-xl p-4 text-sm text-white focus:border-yellow-500 focus:outline-none min-h-[80px] resize-y placeholder-gray-500"></textarea>
                                    <button onclick="addComment()" class="absolute right-3 bottom-3 bg-white text-black px-4 py-1.5 rounded-lg text-xs font-bold hover:bg-gray-200 shadow-lg">Ï†ÑÏÜ°</button>
                                </div>
                            </div>
                            <div id="comments-list" class="space-y-4 p-4"></div>
                        </div>
                    </div>
                </div>

                <!-- My Page (Simplified) -->
                <div id="my-page" class="app-view hidden">
                    <!-- Profile Card -->
                    <div id="my-profile-card" class="bg-[#1C1C1E] rounded-3xl border border-gray-800 mb-8 overflow-hidden relative shadow-2xl">
                        <!-- Banner -->
                        <div class="h-32 bg-gradient-to-r from-gray-800 to-gray-900 relative">
                             <div class="absolute inset-0 bg-black/20"></div>
                        </div>
                        
                        <div class="px-6 pb-6 relative">
                            <!-- Avatar -->
                            <div class="absolute -top-12 left-6">
                                <div class="w-24 h-24 rounded-full bg-[#1C1C1E] p-1.5 shadow-xl">
                                    <div class="w-full h-full rounded-full bg-gray-800 flex items-center justify-center overflow-hidden border border-gray-700 relative">
                                        <img id="my-avatar" class="w-full h-full object-cover hidden" alt="avatar">
                                        <span id="my-profile-icon" class="text-4xl">üë§</span>
                                        <span id="my-badge-icon" class="absolute bottom-0 right-0 w-6 h-6 rounded-full bg-black/60 text-white text-xs flex items-center justify-center border border-gray-700 hidden">üêâ</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Action Button -->
                            <div class="flex justify-end pt-4 mb-4">
                                <button onclick="switchMyPageTab('settings')" class="px-4 py-1.5 rounded-full border border-gray-600 text-xs font-bold text-gray-300 hover:bg-gray-800 hover:text-white transition">
                                    ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï
                                </button>
                            </div>
                            
                            <!-- Info -->
                            <div class="mt-2 mb-6">
                                <h3 id="my-nickname" class="text-2xl font-black text-white mb-1">ÏùµÎ™ÖÏùò ÌòëÍ∞ù</h3>
                                <p id="my-email" class="text-sm text-gray-500">ÏûÖÎ¨∏Ïù¥ ÌïÑÏöîÌïòÏò§</p>
                            </div>
                            
                            <!-- Stats -->
                            <div class="flex gap-8 border-t border-gray-800 pt-6">
                                <div>
                                    <div class="text-xs text-gray-500 mb-1 font-medium uppercase tracking-wider">Posts</div>
                                    <div id="stat-posts" class="text-xl font-black text-white">0</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1 font-medium uppercase tracking-wider">Comments</div>
                                    <div id="stat-comments" class="text-xl font-black text-white">0</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1 font-medium uppercase tracking-wider">Likes</div>
                                    <div id="stat-likes" class="text-xl font-black text-yellow-500">0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabs -->
                    <div class="flex border-b border-gray-800 mb-6 overflow-x-auto no-scrollbar gap-6 px-2">
                        <button onclick="switchMyPageTab('posts')" id="tab-my-posts" class="pb-3 text-sm font-bold text-white border-b-2 border-white whitespace-nowrap transition-colors">ÎÇòÏùò ÎπÑÍ∏â</button>
                        <button onclick="switchMyPageTab('activity')" id="tab-my-activity" class="pb-3 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-300 whitespace-nowrap transition-colors">ÌñâÏ†Å</button>
                        <button onclick="switchMyPageTab('bookmarks')" id="tab-my-bookmarks" class="pb-3 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-300 whitespace-nowrap transition-colors">Í¥ÄÏã¨</button>
                        <button onclick="switchMyPageTab('settings')" id="tab-my-settings" class="pb-3 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-300 whitespace-nowrap transition-colors">ÏÑ§Ï†ï</button>
                    </div>
                    
                    <!-- Content Areas -->
                    <div id="my-posts-area" class="space-y-4"></div>
                    <div id="my-activity-area" class="hidden space-y-4">
                        <div class="flex gap-2 border-b border-gray-800 pb-2 overflow-x-auto no-scrollbar">
                            <button id="act-filter-all" onclick="switchActivityFilter('all')" class="px-3 py-1.5 rounded-full text-xs border border-yellow-600 text-yellow-400 whitespace-nowrap">Ï†ÑÏ≤¥</button>
                            <button id="act-filter-comment" onclick="switchActivityFilter('comment')" class="px-3 py-1.5 rounded-full text-xs border border-gray-700 text-gray-400 whitespace-nowrap">Ï†ÑÏÑú(ÎåìÍ∏Ä)</button>
                            <button id="act-filter-like" onclick="switchActivityFilter('like')" class="px-3 py-1.5 rounded-full text-xs border border-gray-700 text-gray-400 whitespace-nowrap">Î™ÖÏÑ±(Ï¢ãÏïÑÏöî)</button>
                        </div>
                        <div id="activity-list" class="space-y-2"></div>
                    </div>
                    <div id="my-bookmarks-area" class="hidden space-y-4"></div>
                    <div id="my-settings-area" class="hidden space-y-6">
                        <!-- Settings Content -->
                        <div class="space-y-4">
                            <div class="bg-[#1C1C1E] p-4 rounded-2xl border border-gray-800">
                                <h4 class="text-sm font-bold text-white mb-4">ÎÇ¥ Ï†ïÎ≥¥ ÏàòÏ†ï</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="text-xs text-gray-500 mb-1 block">Ìò∏ (ÎãâÎÑ§ÏûÑ)</label>
                                        <div class="flex gap-2">
                                            <input id="edit-nickname" type="text" class="flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-yellow-500 outline-none">
                                            <button onclick="updateNickname()" class="bg-gray-800 text-white px-3 py-2 rounded-lg text-xs font-bold border border-gray-700 hover:bg-gray-700">Î≥ÄÍ≤Ω</button>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="text-xs text-gray-500 mb-1 block">ÎπÑÍ∏â Î¥âÏù∏ (ÏïîÌò∏)</label>
                                        <div class="flex gap-2">
                                            <input id="edit-pw" type="password" placeholder="ÏÉà ÏïîÌò∏ ÏûÖÎ†•" class="flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-yellow-500 outline-none">
                                            <button onclick="updatePassword()" class="bg-gray-800 text-white px-3 py-2 rounded-lg text-xs font-bold border border-gray-700 hover:bg-gray-700">Ïû¨ÏÑ§Ï†ï</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-[#1C1C1E] p-4 rounded-2xl border border-gray-800">
                                <h4 class="text-sm font-bold text-white mb-4">Íæ∏ÎØ∏Í∏∞</h4>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-400">Ïö©Î™® (ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ)</span>
                                        <div class="flex items-center gap-2">
                                            <input type="file" id="avatar-input" class="hidden" accept="image/*" onchange="updateAvatar()">
                                            <button onclick="document.getElementById('avatar-input').click()" class="text-xs bg-gray-800 text-gray-300 px-2 py-1 rounded border border-gray-700">Î≥ÄÍ≤Ω</button>
                                            <button onclick="removeAvatar()" class="text-xs text-red-500 px-2 py-1">ÏÇ≠Ï†ú</button>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-400">Î¨∏Ìåå ÍπÉÎ∞ú (Î∞∞ÎÑà)</span>
                                        <div class="flex items-center gap-2">
                                            <input type="file" id="banner-input" class="hidden" accept="image/*" onchange="updateBanner()">
                                            <button onclick="document.getElementById('banner-input').click()" class="text-xs bg-gray-800 text-gray-300 px-2 py-1 rounded border border-gray-700">Î≥ÄÍ≤Ω</button>
                                            <button onclick="removeBanner()" class="text-xs text-red-500 px-2 py-1">ÏÇ≠Ï†ú</button>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-xs text-gray-400">Î™ÖÌå® Ïä§ÌÉÄÏùº</span>
                                            <select id="badge-style-select" onchange="updateBadgeStyle()" class="bg-black text-white text-xs border border-gray-700 rounded px-2 py-1">
                                                <option value="auto">ÏûêÎèô (Î†àÎ≤®)</option>
                                                <option value="gold">Í∏àÎπõ (Gold)</option>
                                                <option value="cyan">Ï≤≠Îπõ (Cyan)</option>
                                                <option value="gray">ÌùëÎπõ (Gray)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-xs text-gray-400">Î™ÖÌå® Î¨∏Ïñë</span>
                                            <select id="badge-icon-select" onchange="updateBadgeIcon()" class="bg-black text-white text-xs border border-gray-700 rounded px-2 py-1">
                                                <option value="">ÏóÜÏùå</option>
                                                <option value="dragon">Ïö© (Dragon)</option>
                                                <option value="star">Î≥Ñ (Star)</option>
                                                <option value="sword">Í≤Ä (Sword)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-xs text-gray-400">Î∞∞Í≤Ω ÌíçÍ≤Ω</span>
                                            <select id="theme-style-select" onchange="updateThemeStyle()" class="bg-black text-white text-xs border border-gray-700 rounded px-2 py-1">
                                                <option value="dark">ÍπäÏùÄ Î∞§ (Dark)</option>
                                                <option value="gold">Ìô©Í∏àÌñ• (Gold)</option>
                                                <option value="cyan">Ï≤≠Î™Ö (Cyan)</option>
                                                <option value="rose">Ï†ÅÏõî (Rose)</option>
                                                <option value="emerald">Ïà≤ (Emerald)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-[#1C1C1E] p-4 rounded-2xl border border-gray-800">
                                <h4 class="text-sm font-bold text-white mb-4">Ï†ÑÍ∞à(ÏïåÎ¶º) ÏÑ§Ï†ï</h4>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-400">Ï†ÑÏÑú(ÎåìÍ∏Ä) ÏïåÎ¶º</span>
                                        <input type="checkbox" id="noti-comment" class="toggle-checkbox" onchange="updateNotificationSettings()">
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-400">Î™ÖÏÑ±(Ï¢ãÏïÑÏöî) ÏïåÎ¶º</span>
                                        <input type="checkbox" id="noti-like" class="toggle-checkbox" onchange="updateNotificationSettings()">
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-400">Î∞ÄÏÑú(Ï™ΩÏßÄ) ÏïåÎ¶º</span>
                                        <input type="checkbox" id="noti-message" class="toggle-checkbox" onchange="updateNotificationSettings()">
                                    </div>
                                </div>
                            </div>

                            <button onclick="logout()" class="w-full py-3 text-red-400 font-bold bg-red-900/10 border border-red-900/30 rounded-xl">ÌïòÏÇ∞ÌïòÍ∏∞</button>
                        </div>
                    </div>
                </div>

                <!-- Placeholder Views for Other Boards -->
                <div id="free-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">ÏûêÏú† Í≤åÏãúÌåê</h2><p class="text-gray-500 text-sm">ÏûêÏú†Î°≠Í≤å Ïù¥ÏïºÍ∏∞Î•º ÎÇòÎàÑÏãúÏò§</p></div>
                    <div id="free-board-list" class="space-y-4"></div>
                </div>
                <div id="humor-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">Ïò§ÎäòÏùò Ïú†Î®∏</h2><p class="text-gray-500 text-sm">Ïû†Ïãú Ïâ¨Ïñ¥Í∞ÄÏãúÏò§</p></div>
                    <div id="humor-board-list" class="space-y-4"></div>
                </div>
                <div id="debate-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">Ïò§ÎäòÏùò ÌÜ†Î°†</h2><p class="text-gray-500 text-sm">Îú®Í±∞Ïö¥ ÎÖºÏüÅÏùò Ïû•</p></div>
                    <div id="debate-board-list" class="space-y-4"></div>
                </div>
                <div id="music-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">ÏùåÏïÖ Ïù¥ÏïºÍ∏∞</h2><p class="text-gray-500 text-sm">ÌíçÎ•òÎ•º Ï¶êÍ∏∞ÏãúÏò§</p></div>
                    <div id="music-board-list" class="space-y-4"></div>
                </div>
                <div id="travel-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">Ïó¨Ìñâ ÌÉêÎ∞©</h2><p class="text-gray-500 text-sm">Í∞ïÌò∏Î•º Ïú†ÎûåÌïòÎ©∞</p></div>
                    <div id="travel-board-list" class="space-y-4"></div>
                </div>
                <div id="event-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">Ïù¥Î≤§Ìä∏</h2><p class="text-gray-500 text-sm">Î¨∏ÌååÏùò ÌñâÏÇ¨</p></div>
                    <div id="event-board-list" class="space-y-4"></div>
                </div>
                <div id="market-today" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">Ïò§ÎäòÏùò ÏãúÌô©</h2><p class="text-gray-500 text-sm">ÏãúÏû•Ïùò ÌùêÎ¶ÑÏùÑ ÏùΩÏúºÏãúÏò§</p></div>
                    <div id="market-today-wrap"></div>
                </div>
                <div id="notice-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="hidden md:block text-3xl font-black text-white leading-none mb-1">Í≥µÏßÄ ÏÇ¨Ìï≠</h2><p class="text-gray-500 text-sm">Î¨∏ÌååÏùò ÏïåÎ¶º</p></div>
                    <div id="notice-board-list" class="space-y-4"></div>
                </div>
                <div id="welcome-board" class="app-view hidden">
                    <div class="mb-6"><h2 class="text-3xl font-black text-white leading-none mb-1">Í∞ÄÏûÖ Ïù∏ÏÇ¨</h2><p class="text-gray-500 text-sm">ÏÉàÎ°úÏö¥ ÌòëÍ∞ùÏùÑ ÌôòÏòÅÌïòÏò§</p></div>
                    <div id="welcome-board-list" class="space-y-4"></div>
                </div>
                <div id="kiwoom-catch" class="app-view hidden">
                    <div class="mb-6"><h2 class="text-3xl font-black text-white leading-none mb-1">ÌÇ§ÏõÄ Ï∫êÏπò</h2><p class="text-gray-500 text-sm">ÏûêÎèôÎß§Îß§ Ïó∞Íµ¨ÏÜå</p></div>
                    <div id="kiwoom-catch-list" class="space-y-4"></div>
                </div>
                <div id="profit-cert" class="app-view hidden">
                    <div class="mb-6"><h2 class="text-3xl font-black text-white leading-none mb-1">ÏàòÏùµ Ïù∏Ï¶ù</h2><p class="text-gray-500 text-sm">Ï†ÑÍ≥ºÎ•º ÏûêÎûëÌïòÏãúÏò§</p></div>
                    <div id="profit-cert-list" class="space-y-4"></div>
                </div>
                <div id="material-upload" class="app-view hidden"></div> <!-- Logic handled by JS -->

            </div>
        </main>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav md:hidden">
        <div class="nav-grid">
            <button onclick="navigate('gangho-plaza')" class="nav-btn active" data-target="gangho-plaza" aria-selected="true">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span>Í¥ëÏû•</span>
            </button>
            <button onclick="navigate('stock-board')" class="nav-btn" data-target="stock-board" aria-selected="false">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                <span>Ï¢ÖÎ™©</span>
            </button>
            <div class="mobile-fab-wrapper">
                <button onclick="tryOpenWriteModal(getCurrentViewType())" class="mobile-fab">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </button>
            </div>
            <button onclick="navigate('journal-board')" class="nav-btn" data-target="journal-board" aria-selected="false">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
                <span>ÏùºÏßÄ</span>
            </button>
            <button onclick="openMenuPalette()" class="nav-btn" aria-selected="false">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                <span>Ï†ÑÏ≤¥</span>
            </button>
        </div>
    </nav>

    <!-- Global Modals -->
    <div id="newPostModal" class="hidden fixed inset-0 bg-black z-[60] flex flex-col animate-slide-up">
        <div class="flex items-center justify-between px-4 py-3 bg-[#1C1C1E]/90 backdrop-blur-md border-b border-gray-800 sticky top-0 z-10">
            <button onclick="closeModal('newPostModal')" class="text-gray-400 text-base font-medium hover:text-white">Ï≤†Ìöå</button>
            <span id="post-modal-title" class="font-bold text-white text-base">ÏÉàÎ°úÏö¥ ÎπÑÍ∏â</span>
            <button onclick="savePost()" class="text-yellow-500 font-bold text-base hover:text-yellow-400 disabled:opacity-50" id="save-post-btn">Îì±Î°ù</button>
        </div>
        <div class="flex-grow overflow-y-auto flex flex-col bg-black relative">
            <div class="px-4 py-4 border-b border-gray-800">
                <div class="flex space-x-6 text-sm overflow-x-auto scroll-hidden">
                    <label class="flex items-center flex-shrink-0 cursor-pointer opacity-50 transition-opacity peer-checked:opacity-100">
                        <input type="radio" name="post-type" id="type-public" value="public" onchange="togglePostTypeFields('public')" class="hidden peer" checked>
                        <span class="peer-checked:text-white peer-checked:font-bold">Í∞ïÌò∏Í¥ëÏû•</span>
                    </label>
                    <label class="flex items-center flex-shrink-0 cursor-pointer opacity-50 transition-opacity peer-checked:opacity-100">
                        <input type="radio" name="post-type" id="type-stock" value="stock" onchange="togglePostTypeFields('stock')" class="hidden peer">
                        <span class="peer-checked:text-white peer-checked:font-bold">Ï¢ÖÎ™©ÎπÑÍ∏â</span>
                    </label>
                    <label class="flex items-center flex-shrink-0 cursor-pointer opacity-50 transition-opacity peer-checked:opacity-100">
                        <input type="radio" name="post-type" id="type-secret" value="secret" onchange="togglePostTypeFields('secret')" class="hidden peer">
                        <span class="peer-checked:text-white peer-checked:font-bold">ÏïîÏ≤úÍ∞ùÏûî</span>
                    </label>
                </div>
            </div>
            <div id="stock-area" class="hidden px-4 py-3 bg-[#1C1C1E]">
                <input type="text" id="stock-input" list="stock-options" class="w-full bg-transparent text-white py-1 text-base placeholder-gray-600 focus:outline-none" placeholder="Ï¢ÖÎ™©Î™Ö (Ïòà: ÏÇºÏÑ±Ï†ÑÏûê)">
                <datalist id="stock-options"></datalist>
            </div>
            <div id="mu-gong-area" class="px-4 py-3 bg-[#1C1C1E]">
                <select id="mu-gong-select" class="w-full bg-transparent text-white text-base py-1 focus:ring-0 cursor-pointer appearance-none">
                    <option value="" disabled selected>Î¨¥Í≥µ(ÎßêÎ®∏Î¶¨) ÏÑ†ÌÉùÌïòÏãúÏò§</option>
                </select>
            </div>
            <div id="category-area" class="hidden px-4 py-3 bg-[#1C1C1E]">
                <select id="post-category-select" class="w-full bg-transparent text-white text-base py-1 focus:ring-0 cursor-pointer appearance-none">
                    <option value="" selected>Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù ÏóÜÏùå</option>
                    <option value="notice">Í≥µÏßÄ</option>
                    <option value="question">ÏßàÎ¨∏</option>
                    <option value="analysis">Î∂ÑÏÑù</option>
                </select>
            </div>
            <div class="px-4 py-3">
                <input id="new-post-title" type="text" placeholder="Ï†úÎ™©ÏùÑ Ï†ÅÏúºÏãúÏò§" oninput="autoSavePost()" class="w-full bg-transparent border-none text-white text-2xl font-bold placeholder-gray-600 focus:outline-none py-2">
            </div>
            <div id="new-post-content" contenteditable="true" placeholder="Î¨¥Î¶ºÏùò ÏßÄÌòúÎ•º ÎÇòÎàÑÏñ¥ Ï£ºÏãúÏò§..." oninput="autoSavePost()" class="flex-grow px-4 py-2 text-lg text-gray-200 focus:outline-none pb-20 leading-relaxed"></div>
        </div>
        <div class="editor-toolbar flex items-center justify-between px-4 py-3 bg-[#1C1C1E] border-t border-gray-800 safe-area-bottom">
            <div class="flex items-center space-x-4">
                <button onclick="formatDoc('bold')" class="text-gray-400 hover:text-white"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path></svg></button>
                <label for="image-upload-input" onclick="captureEditorSelection()" class="text-gray-400 hover:text-white cursor-pointer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></label>
                <input type="file" id="image-upload-input" accept="image/*" class="hidden" onchange="handleImageUpload()">
            </div>
            <span id="autosave-indicator" class="text-xs text-green-500 opacity-0 transition-opacity">Í∏∞Î°ùÎê®</span>
        </div>
    </div>

    <!-- Journal Modal -->
    <div id="newJournalModal" class="hidden fixed inset-0 bg-black z-[60] flex flex-col animate-slide-up">
        <div class="flex items-center justify-between px-4 py-3 bg-[#1C1C1E]/90 backdrop-blur-md border-b border-gray-800 sticky top-0 z-10">
            <button onclick="closeModal('newJournalModal')" class="text-gray-400 text-base font-medium hover:text-white">Ï≤†Ìöå</button>
            <span class="font-bold text-white text-base">Îß§Îß§ ÏùºÏßÄ</span>
            <button onclick="saveJournalEntry()" class="text-yellow-500 font-bold text-base hover:text-yellow-400">Í∏∞Î°ù</button>
        </div>
        <div class="flex-grow overflow-y-auto bg-black p-4 space-y-4">
            <div>
                <label class="block text-xs text-gray-500 mb-1">Ï¢ÖÎ™©Î™Ö</label>
                <input id="journal-stock-name" type="text" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl px-4 py-3 text-white focus:border-yellow-500 outline-none" placeholder="Ïòà: ÏÇºÏÑ±Ï†ÑÏûê">
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-xs text-gray-500 mb-1">Îß§ÏàòÍ∞Ä (Ïõê)</label>
                    <input id="journal-buy-price" type="number" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl px-4 py-3 text-white focus:border-yellow-500 outline-none" placeholder="0">
                </div>
                <div>
                    <label class="block text-xs text-gray-500 mb-1">Îß§ÎèÑÍ∞Ä (Ïõê)</label>
                    <input id="journal-sell-price" type="number" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl px-4 py-3 text-white focus:border-yellow-500 outline-none" placeholder="0 (Î≥¥Ïú†Ï§ëÏù¥Î©¥ ÎπÑÏõåÎëêÏãúÏò§)">
                </div>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-xs text-gray-500 mb-1">ÏàòÎüâ (Ï£º)</label>
                    <input id="journal-quantity" type="number" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl px-4 py-3 text-white focus:border-yellow-500 outline-none" placeholder="1">
                </div>
                <div>
                    <label class="block text-xs text-gray-500 mb-1">Îß§Îß§ÏùºÏûê</label>
                    <input id="journal-date" type="date" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl px-4 py-3 text-white focus:border-yellow-500 outline-none">
                </div>
            </div>
            <div>
                <label class="block text-xs text-gray-500 mb-1">Ï†ÑÎûµ Î∞è Î©îÎ™®</label>
                <textarea id="journal-strategy" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl px-4 py-3 text-white focus:border-yellow-500 outline-none h-32 resize-none" placeholder="ÏßÑÏûÖ Í∑ºÍ±∞, Ï≤≠ÏÇ∞ Ïù¥Ïú†, Í∞êÏ†ï ÏÉÅÌÉú Îì±ÏùÑ Í∏∞Î°ùÌïòÏãúÏò§..."></textarea>
            </div>
            <div class="flex items-center justify-between pt-2">
                <label class="flex items-center gap-2 cursor-pointer">
                    <input id="journal-is-public" type="checkbox" class="w-5 h-5 rounded border-gray-600 bg-gray-800 text-yellow-500 focus:ring-0">
                    <span class="text-sm text-gray-300">Í∞ïÌò∏Ïóê Í≥µÍ∞ú (ÎπÑÍ∏â Í≥µÏú†)</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="hidden fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-sm p-8 rounded-3xl shadow-2xl border border-gray-800">
            <h3 class="text-2xl font-bold text-white mb-6 text-center">Î¨∏Ìåå ÏûÖÎ¨∏</h3>
            <div class="flex border-b border-gray-700 mb-6">
                <button id="tab-login" onclick="switchAuthTab('login')" class="flex-1 pb-3 text-sm font-bold text-white border-b-2 border-white transition">ÏûÖÎ¨∏(Î°úÍ∑∏Ïù∏)</button>
                <button id="tab-signup" onclick="switchAuthTab('signup')" class="flex-1 pb-3 text-sm font-bold text-gray-500 border-b-2 border-transparent transition hover:text-gray-300">Î¨∏ÌååÎì±Î°ù</button>
            </div>
            <input id="auth-email" type="email" placeholder="ÏÑúÏã† Ï£ºÏÜå (Ïù¥Î©îÏùº)" class="w-full bg-black border border-gray-700 text-white p-4 rounded-xl mb-3 text-base focus:border-yellow-500 outline-none">
            <input id="auth-password" type="password" placeholder="ÎπÑÍ∏â Î¥âÏù∏ (ÏïîÌò∏)" class="w-full bg-black border border-gray-700 text-white p-4 rounded-xl mb-2 text-base focus:border-yellow-500 outline-none">
            <div id="login-extras" class="flex justify-end mb-4">
                <button onclick="openModal('forgotPasswordModal')" class="text-xs text-gray-400 hover:text-white">ÏïîÌò∏Î•º ÏûäÏúºÏÖ®ÏÜå?</button>
            </div>
            <div id="signup-fields" class="hidden">
                <input id="auth-password-confirm" type="password" placeholder="Î¥âÏù∏ ÌôïÏù∏" class="w-full bg-black border border-gray-700 text-white p-4 rounded-xl mb-4 text-base focus:border-yellow-500 outline-none">
                <div class="flex items-center mb-6 px-1">
                    <input type="checkbox" id="term-agree-chk" class="w-4 h-4 rounded border-gray-600 bg-gray-800 text-yellow-500 focus:ring-0">
                    <label for="term-agree-chk" class="ml-2 text-xs text-gray-400">
                        <span class="underline cursor-pointer" onclick="openLegalModal('terms')">Ïù¥Ïö©ÏïΩÍ¥Ä</span> Î∞è 
                        <span class="underline cursor-pointer" onclick="openLegalModal('privacy')">Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®</span> ÎèôÏùò
                    </label>
                </div>
            </div>
            <button id="auth-submit-btn" onclick="submitAuth()" class="w-full py-3.5 text-sm bg-white text-black rounded-xl font-bold hover:bg-gray-200 transition mb-4">ÏûÖÎ¨∏</button>
            <button onclick="closeModal('authModal')" class="w-full text-center text-xs text-gray-500 hover:text-white">Îã´Í∏∞</button>
        </div>
    </div>

    <!-- Menu Palette Modal -->
    <div id="menuPaletteModal" class="hidden fixed inset-0 z-[70] flex flex-col animate-slide-up bg-black/95 backdrop-blur-xl">
        <div class="flex items-center justify-between px-4 py-3 border-b border-gray-800 bg-[#1C1C1E]">
            <span class="text-lg font-bold text-white">Ï†ÑÏ≤¥ Î©îÎâ¥</span>
            <button onclick="closeModal('menuPaletteModal')" class="w-8 h-8 flex items-center justify-center bg-gray-800 rounded-full text-gray-400">‚úï</button>
        </div>
        <div class="p-4 border-b border-gray-800 bg-black">
            <input id="menu-search-input" type="text" class="w-full bg-[#1C1C1E] border border-gray-800 rounded-xl px-4 py-3 text-white text-sm focus:border-yellow-500 focus:outline-none" placeholder="Í≤ÄÏÉâ (Ïòà: ÏãúÌô©, Í≥µÏßÄ, Ïú†Î®∏)">
        </div>
        <div class="flex-grow overflow-y-auto">
            <div class="p-4 space-y-6">
                <!-- My Page Link in Palette -->
                <button onclick="navigate('my-page'); closeModal('menuPaletteModal')" class="w-full bg-[#1C1C1E] p-4 rounded-xl border border-gray-800 flex items-center gap-3 hover:bg-gray-800 transition">
                    <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center text-xl">üë§</div>
                    <div class="text-left">
                        <div class="font-bold text-white">ÎÇòÏùò Î≥∏Í±∞ÏßÄ</div>
                        <div class="text-xs text-gray-400">ÌîÑÎ°úÌïÑ, ÏÑ§Ï†ï, ÎÇ¥ ÌôúÎèô</div>
                    </div>
                </button>

                <div>
                    <div class="text-xs font-bold text-yellow-400 mb-3 uppercase tracking-wider">Ï¶êÍ≤®Ï∞æÍ∏∞</div>
                    <div id="menu-favorites" class="grid grid-cols-4 gap-3"></div>
                </div>
                <div>
                    <div class="text-xs font-bold text-yellow-400 mb-3 uppercase tracking-wider">ÏµúÍ∑º Î∞©Î¨∏</div>
                    <div id="menu-recents" class="grid grid-cols-4 gap-3"></div>
                </div>
                <div>
                    <div class="text-xs font-bold text-yellow-400 mb-3 uppercase tracking-wider">Ï†ÑÏ≤¥ Î™©Î°ù</div>
                    <div id="menu-all" class="grid grid-cols-4 gap-3"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notificationModal" class="hidden fixed inset-0 bg-black/60 z-[60] flex justify-end">
        <div class="bg-[#1C1C1E] w-full max-w-xs h-full shadow-2xl border-l border-gray-800 animate-slide-left flex flex-col">
            <div class="p-4 border-b border-gray-800 flex justify-between items-center bg-[#1C1C1E]">
                <h3 class="text-lg font-bold text-white">Ï†ÑÍ∞à</h3>
                <button onclick="closeModal('notificationModal')" class="text-gray-400 hover:text-white">‚úï</button>
            </div>
            <div class="p-3 border-b border-gray-800 flex gap-2 overflow-x-auto no-scrollbar">
                <button onclick="switchNotificationsFilter('all')" id="noti-filter-all" class="px-3 py-1.5 rounded-full text-xs bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700 whitespace-nowrap">Ï†ÑÏ≤¥</button>
                <button onclick="switchNotificationsFilter('comment')" id="noti-filter-comment" class="px-3 py-1.5 rounded-full text-xs bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700 whitespace-nowrap">Ï†ÑÏÑú</button>
                <button onclick="switchNotificationsFilter('like')" id="noti-filter-like" class="px-3 py-1.5 rounded-full text-xs bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700 whitespace-nowrap">Î™ÖÏÑ±</button>
                <button onclick="switchNotificationsFilter('message')" id="noti-filter-message" class="px-3 py-1.5 rounded-full text-xs bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700 whitespace-nowrap">Î∞ÄÏÑú</button>
            </div>
            <div id="notification-list" class="flex-grow overflow-y-auto p-2 space-y-2">
                <div class="text-center text-gray-500 mt-10 text-sm">Ï†ÑÍ∞àÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...</div>
            </div>
            <div class="p-3 border-t border-gray-800">
                <button onclick="markAllNotificationsRead()" class="w-full py-2 text-sm bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700">Î™®Îëê ÌôïÏù∏</button>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div id="messageModal" class="hidden fixed inset-0 z-[70] flex flex-col animate-slide-up bg-black/95 backdrop-blur-xl">
        <div class="flex items-center justify-between px-4 py-3 border-b border-gray-800 bg-[#1C1C1E]">
            <span class="text-lg font-bold text-white">Î∞ÄÏÑúÌï®</span>
            <button onclick="document.getElementById('messageModal').classList.add('hidden')" class="w-8 h-8 flex items-center justify-center bg-gray-800 rounded-full text-gray-400">‚úï</button>
        </div>
        <div class="flex-grow overflow-y-auto">
            <div id="message-list" class="p-4 space-y-3">
                <div class="text-center text-gray-500 mt-10">Ï†ÑÍ∞àÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ëÏù¥Ïò§...</div>
            </div>
        </div>
        <div id="message-compose-area" class="hidden p-4 border-t border-gray-800 bg-[#1C1C1E]">
            <div class="flex flex-col gap-2">
                <div class="text-xs text-gray-400">ÏàòÏã†Ïù∏: <span id="msg-receiver-name" class="text-white font-bold"></span></div>
                <textarea id="msg-content" class="w-full bg-gray-900 border border-gray-700 rounded-xl p-3 text-white text-sm focus:outline-none focus:border-yellow-500 resize-none h-24" placeholder="ÎÇ¥Ïö©ÏùÑ Ï†ÅÏúºÏãúÏò§..."></textarea>
                <div class="flex justify-end gap-2">
                    <button onclick="cancelMessage()" class="px-4 py-2 bg-gray-800 rounded-lg text-sm text-gray-300">Ï≤†Ìöå</button>
                    <button onclick="submitMessage()" class="px-4 py-2 bg-yellow-600 rounded-lg text-sm text-black font-bold">Ï†ÑÏÜ°</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Other Modals (ProfileView, UserAction, Report, etc.) -->
    <div id="profileViewModal" class="hidden fixed inset-0 z-[70] flex flex-col animate-slide-up bg-black/95 backdrop-blur-xl">
        <div class="flex items-center justify-between px-4 py-3 border-b border-gray-800 bg-[#1C1C1E]">
            <span class="text-lg font-bold text-white">ÌòëÍ∞ù ÌîÑÎ°úÌïÑ</span>
            <button onclick="closeModal('profileViewModal')" class="w-8 h-8 flex items-center justify-center bg-gray-800 rounded-full text-gray-400">‚úï</button>
        </div>
        <div class="flex-grow overflow-y-auto">
            <div class="p-4 space-y-4">
                <div id="pv-card" class="rounded-xl border border-gray-800 bg-[#1C1C1E] p-4 relative">
                    <div class="h-24 w-full rounded-lg mb-4 bg-cover bg-center"></div>
                    <div class="flex items-center gap-3">
                        <img id="pv-avatar" class="w-14 h-14 rounded-full border border-gray-700" src="" alt="">
                        <div>
                            <div id="pv-name" class="text-white font-bold text-lg"></div>
                            <div id="pv-stats" class="text-xs text-gray-400"></div>
                        </div>
                    </div>
                    <div class="mt-4 grid grid-cols-3 gap-2">
                        <button id="pv-msg-btn" class="py-2 text-sm bg-yellow-600 text-black rounded-lg font-bold">Î∞ÄÏÑú Î≥¥ÎÇ¥Í∏∞</button>
                        <button id="pv-follow-btn" class="py-2 text-sm bg-gray-800 text-white rounded-lg font-bold">ÌåîÎ°úÏö∞</button>
                        <button id="pv-block-btn" class="py-2 text-sm bg-gray-800 text-white rounded-lg font-bold">Ï∞®Îã®</button>
                    </div>
                </div>
                <div>
                    <h4 class="text-sm font-bold text-gray-400 mb-2">ÏµúÍ∑º Í∏Ä</h4>
                    <div id="pv-posts-list" class="space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="userActionSheet" class="hidden fixed inset-0 bg-black/80 z-[70] flex items-end">
        <div class="bg-[#1C1C1E] w-full max-w-md mx-auto p-4 rounded-t-2xl border-t border-gray-800">
            <div class="flex items-center gap-3 mb-4">
                <img id="user-sheet-avatar" class="w-12 h-12 rounded-full border border-gray-700" src="" alt="avatar">
                <h3 id="user-sheet-name" class="text-lg font-bold text-white"></h3>
            </div>
            <div class="flex flex-col gap-2 mb-4">
                <button id="sheet-msg-btn" class="w-full py-3 text-sm bg-yellow-600 text-black rounded-lg font-bold">Î∞ÄÏÑú Î≥¥ÎÇ¥Í∏∞</button>
                <button id="sheet-profile-btn" class="w-full py-3 text-sm bg-gray-800 text-white rounded-lg font-bold">ÌîÑÎ°úÌïÑ Î≥¥Í∏∞</button>
                <button id="follow-btn" class="w-full py-3 text-sm bg-gray-800 text-white rounded-lg font-bold">ÌåîÎ°úÏö∞</button>
                <button id="block-btn" class="w-full py-3 text-sm bg-gray-800 text-white rounded-lg font-bold">Ï∞®Îã®</button>
            </div>
            <button onclick="closeModal('userActionSheet')" class="w-full py-3 text-sm bg-gray-900 text-gray-300 rounded-lg">Îã´Í∏∞</button>
        </div>
    </div>

    <div id="reportModal" class="hidden fixed inset-0 bg-black/60 z-[70] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-sm p-6 rounded-3xl shadow-2xl border border-gray-800">
            <h3 class="text-lg font-bold text-white mb-2">Ïã†Í≥†ÌïòÍ∏∞</h3>
            <select id="report-reason" class="w-full bg-black border border-gray-700 text-white p-3 rounded-xl mb-3 text-sm focus:border-red-500 outline-none">
                <option value="spam">Î≤ΩÏÑú ÎÇ®Î∞ú (Í¥ëÍ≥†/ÎèÑÎ∞∞)</option>
                <option value="abuse">Ïñ∏ÏÇ¨ Î∂àÏÜê (ÏöïÏÑ§/ÎπÑÌïò)</option>
                <option value="adult">ÌíçÍ∏∞ Î¨∏ÎûÄ (ÏùåÎûÄ/Î∂ÄÏ†ÅÏ†à)</option>
                <option value="fraud">ÌòπÏÑ∏Î¨¥ÎØº (ÏÇ¨Í∏∞/Í±∞Ïßì)</option>
                <option value="other">Í∏∞ÌÉÄ ÏÇ¨Ïú†</option>
            </select>
            <textarea id="report-details" class="w-full bg-black border border-gray-700 text-white p-3 rounded-xl mb-4 text-sm focus:border-red-500 outline-none h-24 resize-none" placeholder="ÏÉÅÏÑ∏ ÏÇ¨Ïú†"></textarea>
            <div class="flex gap-2">
                <button onclick="closeModal('reportModal')" class="flex-1 py-3 text-sm bg-gray-800 text-gray-300 rounded-xl font-bold">Ï≤†Ìöå</button>
                <button onclick="submitReport()" class="flex-1 py-3 text-sm bg-red-600 text-white rounded-xl font-bold">Í¥ÄÏïÑ Í≥†Î∞ú</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirm Modal -->
    <div id="deleteConfirmModal" class="hidden fixed inset-0 bg-black/80 z-[70] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-xs p-6 rounded-2xl border border-red-900 text-center">
            <h3 class="text-lg font-bold text-red-500 mb-2">ÏÇ≠Ï†ú ÌôïÏù∏</h3>
            <p class="text-sm text-gray-400 mb-1">Ï†ïÎßêÎ°ú ÏïÑÎûòÏùò ÎπÑÍ∏âÏùÑ ÌÉúÏö∞ÏãúÍ≤†ÏäµÎãàÍπå?</p>
            <p id="confirm-delete-title" class="text-xs text-gray-300 mb-4 break-words"></p>
            <div class="flex gap-3 justify-center">
                <button onclick="closeModal('deleteConfirmModal')" class="px-4 py-2 text-sm bg-gray-800 rounded-lg text-gray-300">Ï≤†Ìöå</button>
                <button onclick="deletePost(state.currentPostId)" class="px-4 py-2 text-sm bg-red-600 rounded-lg text-white font-bold">ÏÇ≠Ï†ú</button>
            </div>
        </div>
    </div>

    <!-- YouTube Embed Modal -->
    <div id="youtubeEmbedModal" class="hidden fixed inset-0 bg-black/60 z-[70] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-sm p-6 rounded-3xl shadow-2xl border border-gray-800">
            <h3 class="text-lg font-bold text-white mb-4">YouTube ÏòÅÏÉÅ Ï≤®Î∂Ä</h3>
            <input id="youtube-url-input" type="text" placeholder="Í∏∞Î°ù ÏòÅÏÉÅ(YouTube) Ï£ºÏÜåÎ•º Î∂ôÏó¨ÎÑ£ÏúºÏãúÏò§" class="w-full bg-black border border-gray-700 text-white p-3 rounded-xl mb-4 text-sm focus:border-red-500 outline-none">
            <div class="flex gap-2">
                <button onclick="closeModal('youtubeEmbedModal')" class="flex-1 py-3 text-sm bg-gray-800 text-gray-300 rounded-xl font-bold">Ï≤†Ìöå</button>
                <button onclick="handleYouTubeEmbedFromModal()" class="flex-1 py-3 text-sm bg-red-600 text-white rounded-xl font-bold">Ï≤®Î∂Ä</button>
            </div>
        </div>
    </div>

    <!-- Forgot/Change Password & Email Verification Modals (Simplified for brevity but essential) -->
    <div id="forgotPasswordModal" class="hidden fixed inset-0 bg-black/60 z-[70] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-sm p-8 rounded-3xl shadow-2xl border border-gray-800">
            <h3 class="text-xl font-bold text-white mb-4 text-center">ÏïîÌò∏ Ï∞æÍ∏∞</h3>
            <input id="reset-email" type="email" placeholder="ÏÑúÏã† Ï£ºÏÜå (Ïù¥Î©îÏùº)" class="w-full bg-black border border-gray-700 text-white p-4 rounded-xl mb-4 text-base focus:border-yellow-500 outline-none">
            <button onclick="sendPasswordReset()" class="w-full py-3.5 text-sm bg-yellow-600 text-white rounded-xl font-bold hover:bg-yellow-500 transition mb-3">Ï†ÑÏÜ°ÌïòÍ∏∞</button>
            <button onclick="closeModal('forgotPasswordModal')" class="w-full text-center text-xs text-gray-500 hover:text-white">Ï≤†Ìöå</button>
        </div>
    </div>
    <div id="changePasswordModal" class="hidden fixed inset-0 bg-black/60 z-[80] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-sm p-6 rounded-3xl shadow-2xl border border-gray-800">
            <h3 class="text-lg font-bold text-white mb-2">ÏïîÌò∏ Î≥ÄÍ≤Ω</h3>
            <input type="password" id="new-password" placeholder="ÏÉà ÏïîÌò∏ (6Ïûê Ïù¥ÏÉÅ)" class="w-full bg-black border border-gray-700 text-white p-3 rounded-xl mb-3 text-sm focus:border-green-500 outline-none">
            <input type="password" id="confirm-new-password" placeholder="Î¥âÏù∏ ÌôïÏù∏" class="w-full bg-black border border-gray-700 text-white p-3 rounded-xl mb-4 text-sm focus:border-green-500 outline-none">
            <button onclick="submitChangePassword()" class="w-full py-3 text-sm bg-green-600 text-white rounded-xl font-bold hover:bg-green-500 transition">ÏïîÌò∏ Î≥ÄÍ≤Ω</button>
        </div>
    </div>
    <div id="emailVerificationModal" class="hidden fixed inset-0 bg-black/80 z-[90] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-sm p-8 rounded-3xl shadow-2xl border border-yellow-600 text-center">
            <h3 class="text-xl font-bold text-white mb-2">ÏÑúÏã†(Ïù¥Î©îÏùº) ÌôïÏù∏</h3>
            <p class="text-sm text-gray-300 mb-6 leading-relaxed">ÏûÖÎ¨∏ ÌóàÍ∞ÄÏ¶ùÏù¥ Î∞úÏÜ°ÎêòÏóàÏÜå.</p>
            <button onclick="closeModal('emailVerificationModal')" class="w-full py-3.5 text-sm bg-yellow-600 text-white rounded-xl font-bold hover:bg-yellow-500 transition">ÌôïÏù∏ÌñàÏÜå</button>
        </div>
    </div>
    <div id="legalModal" class="hidden fixed inset-0 bg-black/80 z-[80] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-lg h-[80vh] flex flex-col rounded-2xl border border-gray-800">
            <div class="p-4 border-b border-gray-800 flex justify-between items-center">
                <h3 id="legal-title" class="text-lg font-bold text-white">Ïù¥Ïö©ÏïΩÍ¥Ä</h3>
                <button onclick="closeModal('legalModal')" class="text-gray-400 hover:text-white">‚úï</button>
            </div>
            <div id="legal-content" class="flex-grow overflow-y-auto p-6 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap"></div>
        </div>
    </div>
    <div id="adminModal" class="hidden fixed inset-0 bg-black/60 z-[80] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#1C1C1E] w-full max-w-md h-[80vh] rounded-2xl border border-gray-800 flex flex-col">
            <div class="p-4 border-b border-gray-800 flex justify-between items-center">
                <h3 class="text-lg font-bold text-white">Í¥ÄÏïÑ(Í¥ÄÎ¶¨Ïûê)</h3>
                <button onclick="closeModal('adminModal')" class="text-gray-400 hover:text-white">‚úï</button>
            </div>
            <div class="p-3 flex gap-2 border-b border-gray-800">
                <button id="admin-tab-reports" onclick="switchAdminTab('reports')" class="px-3 py-1.5 text-xs bg-gray-800 text-gray-300 rounded-full border border-gray-700">Ïã†Í≥†</button>
                <button id="admin-tab-users" onclick="switchAdminTab('users')" class="px-3 py-1.5 text-xs bg-gray-800 text-gray-300 rounded-full border border-gray-700">Î¨∏ÎèÑ</button>
                <button id="admin-tab-broadcast" onclick="switchAdminTab('broadcast')" class="px-3 py-1.5 text-xs bg-gray-800 text-gray-300 rounded-full border border-gray-700">Í≥µÏßÄ</button>
                <button id="admin-tab-deposits" onclick="switchAdminTab('deposits')" class="px-3 py-1.5 text-xs bg-gray-800 text-gray-300 rounded-full border border-gray-700">ÏûÖÍ∏à</button>
            </div>
            <div class="flex-grow overflow-y-auto p-3 space-y-2">
                <div id="admin-reports-area" class="space-y-2">
                    <div id="admin-reports-list" class="space-y-2"></div>
                </div>
                <div id="admin-users-area" class="hidden space-y-2">
                    <div class="flex items-center gap-2 mb-2">
                        <input id="admin-user-q" type="text" placeholder="Î¨∏ÎèÑ Í≤ÄÏÉâ" class="flex-1 bg-black border border-gray-700 text-white text-xs rounded px-2 py-1">
                        <button onclick="loadAdminUsers()" class="text-xs px-2 py-1 bg-gray-800 text-gray-300 rounded">Í≤ÄÏÉâ</button>
                    </div>
                    <div id="admin-users-list" class="space-y-2"></div>
                </div>
                <div id="admin-broadcast-area" class="hidden space-y-2">
                    <textarea id="broadcast-content" class="w-full bg-black border border-gray-700 text-white text-sm rounded p-2 h-24" placeholder="Í≥µÏßÄ ÎÇ¥Ïö©"></textarea>
                    <button onclick="sendBroadcast()" class="w-full py-2 text-sm bg-yellow-600 text-black rounded-xl font-bold">Í≥µÏßÄ Î∞úÏÜ°</button>
                </div>
                <div id="admin-deposits-area" class="hidden space-y-2">
                    <div class="flex items-center gap-2 mb-2">
                        <button onclick="loadAdminDeposits()" class="text-xs px-2 py-1 bg-gray-800 text-gray-300 rounded">ÏÉàÎ°úÍ≥†Ïπ®</button>
                    </div>
                    <div id="admin-deposits-list" class="space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- App Logic -->
    <script src="js/app.js"></script>
</body>
</html>
